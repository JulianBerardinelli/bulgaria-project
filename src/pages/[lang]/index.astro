---
import LandingPage from '~/components/landing/LandingPage.astro';
import {
  DEFAULT_LANGUAGE,
  SUPPORTED_LANGUAGES,
  isSupportedLanguage,
  resolveLanguage,
} from '~/utils/i18n';

export const getStaticPaths = () => {
  return SUPPORTED_LANGUAGES.filter((lang) => lang !== DEFAULT_LANGUAGE).map((lang) => ({
    params: { lang },
  }));
};

const { lang } = Astro.params;

if (!lang || !isSupportedLanguage(lang)) {
  return Astro.redirect('/');
}

if (lang === DEFAULT_LANGUAGE) {
  return Astro.redirect('/');
}

const language = resolveLanguage(lang);
---

<LandingPage lang={language} />
